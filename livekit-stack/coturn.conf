# Coturn Configuration for Pizoo LiveKit
# STUN/TURN server configuration

# Listening ports
listening-port=3478
tls-listening-port=5349

# Alternative ports (if needed)
alt-listening-port=0
alt-tls-listening-port=0

# Listening IPs (0.0.0.0 for all interfaces)
listening-ip=0.0.0.0

# External IP (will be auto-detected, but can be set explicitly)
# external-ip=YOUR_VPS_PUBLIC_IP

# Relay IPs
relay-ip=0.0.0.0

# UDP relay ports range
min-port=50000
max-port=60000

# Realm (must match domain)
realm=rtc.pizoo.app
server-name=rtc.pizoo.app

# Authentication
# Long-term credential mechanism
lt-cred-mech

# Users (format: username:password)
# Can also use database or REST API for dynamic users
user=pizoo:REPLACE_WITH_TURN_PASSWORD

# SSL/TLS certificates
cert=/certs/cert.pem
pkey=/certs/key.pem

# Security
# Require fingerprint in TURN messages
fingerprint

# Mobility with ICE (RFC 8016)
mobility

# Logging
log-file=stdout
verbose

# Performance tuning
# Max bps per allocation
max-bps=1000000

# Total allocation quota
total-quota=100

# Per-user allocation quota
user-quota=10

# Deny specific IPs or networks (optional)
# denied-peer-ip=10.0.0.0-10.255.255.255
# denied-peer-ip=192.168.0.0-192.168.255.255
# denied-peer-ip=172.16.0.0-172.31.255.255

# Allow specific IPs or networks (optional)
# allowed-peer-ip=0.0.0.0-255.255.255.255

# No multicast peers
no-multicast-peers

# No loopback peers
no-loopback-peers

# STUN-only mode disabled (we want TURN too)
# stun-only

# Disconnect idle allocations
stale-nonce=600

# RFC 5780 support (NAT behavior discovery)
response-origin-only-with-rfc5780

# Prometheus metrics (optional)
# prometheus
# prometheus-port=9641

# CLI interface (disabled in production for security)
no-cli

# Process management
pidfile=/var/run/turnserver.pid

# Production settings
prod

# Disable software attribute in responses (security)
no-software-attribute
